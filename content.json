{"meta":{"title":"JeasonLau's Blog","subtitle":null,"description":null,"author":"JeasonLau","url":"https://allwens.work","root":"/"},"pages":[{"title":"投喂通道","date":"2019-07-03T03:49:06.000Z","updated":"2020-01-26T15:25:55.347Z","comments":true,"path":"donate/index.html","permalink":"https://allwens.work/donate/index.html","excerpt":"","text":"预感到这又是一个没有人会看的界面 XD 想要投喂的看官们，可以在任意一篇文章下点击赞赏按钮，就可以看到alipay/wechatpay的收款码啦！"},{"title":"友情链接","date":"2019-07-03T03:49:06.000Z","updated":"2020-01-26T15:06:19.783Z","comments":false,"path":"friends/index.html","permalink":"https://allwens.work/friends/index.html","excerpt":"","text":""},{"title":"categories","date":"2019-07-03T03:49:06.000Z","updated":"2019-07-03T03:52:00.000Z","comments":false,"path":"categories/index.html","permalink":"https://allwens.work/categories/index.html","excerpt":"","text":""},{"title":"留言板","date":"2019-07-03T03:49:06.000Z","updated":"2020-01-26T15:26:47.088Z","comments":true,"path":"message/index.html","permalink":"https://allwens.work/message/index.html","excerpt":"","text":"这是一个莫得感情的充数留言板（并不觉得有人会给我留言啊喂！ (๑•̀ㅂ•́)و✧ 大家有什么话想对我说可以在此留言哦，我如果看到一定会回复的！"},{"title":"tags","date":"2019-07-03T03:49:23.000Z","updated":"2019-07-03T03:52:41.000Z","comments":false,"path":"tags/index.html","permalink":"https://allwens.work/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"ManjaroWPS切换中文问题","slug":"wpsChangeLanguage","date":"2020-01-15T05:39:27.000Z","updated":"2020-01-26T15:42:50.060Z","comments":true,"path":"wpsChangeLanguage/","link":"","permalink":"https://allwens.work/wpsChangeLanguage/","excerpt":"wps在前几天更新之后，界面语言变成了英文，本来没有很太在意，觉得可能过几天更新就好了，但等了几天好像并没有更新的迹象，于是寻找方法进行修复…","text":"wps在前几天更新之后，界面语言变成了英文，本来没有很太在意，觉得可能过几天更新就好了，但等了几天好像并没有更新的迹象，于是寻找方法进行修复… 首先打开AUR仓库，查看wps-office有关的包，发现了wps-office-cn 查看其依赖，发现了wps-office-mui-zh-cn (optional) – zh_CN support for WPS Office 得到修复方法，即手动安装语言包： 1yay -S wps-office-mui-zh-cn 重新打开wps，不出意外的话应该已经修复成功了（因为wps优先使用系统语言），如果没有成功的话，手动点击右上角的A图标，在里面选择中文语言包进行切换即可。","categories":[{"name":"系统优化","slug":"系统优化","permalink":"https://allwens.work/categories/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://allwens.work/tags/linux/"},{"name":"manjaro","slug":"manjaro","permalink":"https://allwens.work/tags/manjaro/"}]},{"title":"python中文字符串居中问题","slug":"stringCenter","date":"2019-12-22T14:40:01.000Z","updated":"2020-01-26T15:43:20.100Z","comments":true,"path":"stringCenter/","link":"","permalink":"https://allwens.work/stringCenter/","excerpt":"最近在实现一个小功能的时候遇到了问题：字符串的居中输出。 虽然python有内置的字符串方法string.center()，使字符串可以居中输出，但它并不能顺利地处理中文字符串，一直无法达到让中文字符串居中的效果。","text":"最近在实现一个小功能的时候遇到了问题：字符串的居中输出。 虽然python有内置的字符串方法string.center()，使字符串可以居中输出，但它并不能顺利地处理中文字符串，一直无法达到让中文字符串居中的效果。 后来我突然醒悟，是不是因为python字符串长度的问题？用以下代码测试： 123str1='哈哈哈'str2='hhh'print(len(str1),'+',len(str2)) 输出结果居然是3+3，也就是说python将一个汉字/字母都记作一个字符，但其实它们的宽度并不相同。这样计算的话必然会导致无法正常居中，关键是要把汉字区别出来，于是我手动写了个居中函数： 1234567891011def strCenter(str, len): lst = list(str) length = 0 for item in lst: if item in string.printable: length += 1 else: length += 2 count = int((len - length) / 2) result = count * ' ' + str + count * ' ' return result 就可以正常居中啦！ 追加以下内容测试一下： 1234567a = '哈a哈a哈a哈a'b = '12345678901234567890'print(a.center(20))print(b.center(20))print(20 * '-')print(strCenter(a, 20))print(strCenter(b, 20)) 运行结果： 12345 哈a哈a哈a哈a 12345678901234567890-------------------- 哈a哈a哈a哈a 12345678901234567890 任务成功完成！","categories":[{"name":"问题解决","slug":"问题解决","permalink":"https://allwens.work/categories/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"}],"tags":[{"name":"python","slug":"python","permalink":"https://allwens.work/tags/python/"}]},{"title":"linux输入法无法呼出问题","slug":"inputError","date":"2019-12-11T04:15:01.000Z","updated":"2020-01-26T15:44:50.191Z","comments":true,"path":"inputError/","link":"","permalink":"https://allwens.work/inputError/","excerpt":"就在刚刚，经过一波大的滚动更新（更新了439个软件包）之后，我的搜狗输入法又双叒叕挂了！","text":"就在刚刚，经过一波大的滚动更新（更新了439个软件包）之后，我的搜狗输入法又双叒叕挂了！ 这次的主要问题是，无法在chrome等应用中呼出输入法，按了很多次shift或者Ctrl+Space后仍然没有反应，后来找到的解决办法是，重新安装gtk2和gtk3： 12sudo pacman -S gtk2sudo pacman -S gtk3 执行完这两个指令后重新启动，再测试发现已经好啦！","categories":[{"name":"故障修复","slug":"故障修复","permalink":"https://allwens.work/categories/%E6%95%85%E9%9A%9C%E4%BF%AE%E5%A4%8D/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://allwens.work/tags/linux/"},{"name":"manjaro","slug":"manjaro","permalink":"https://allwens.work/tags/manjaro/"}]},{"title":"php表单提交并自动发送邮件","slug":"formSubmit","date":"2019-10-29T13:41:34.000Z","updated":"2020-01-26T15:44:01.881Z","comments":true,"path":"formSubmit/","link":"","permalink":"https://allwens.work/formSubmit/","excerpt":"最近在html5up上淘了个主页模板，模板底有一个表单，今天在修改模板的时候，朋友提起可以配置表单实现提交表单时自动发送邮件通知，于是就萌生了这个想法，结果没想到一搞就是三四个小时（主要是因为网上的某些“教程”太坑人了！），所以记录一下配置过程给后来人参考。","text":"最近在html5up上淘了个主页模板，模板底有一个表单，今天在修改模板的时候，朋友提起可以配置表单实现提交表单时自动发送邮件通知，于是就萌生了这个想法，结果没想到一搞就是三四个小时（主要是因为网上的某些“教程”太坑人了！），所以记录一下配置过程给后来人参考。 给服务器安装php,php-fpm作者使用的是ubuntu18.04，所以使用 12sudo apt-get install phpsudo apt-get install php-fpm web服务器添加php支持作者使用的是nginx，为支持php需要修改一下配置文件，网上不少教程说要改nginx.conf，但我发现我这里的配置文件和他们的有很大差异，后来实测修改/etc/nginx/sites-available/default有效。将文件与php有关部分修改为： 123456789101112131415161718192021222324252627282930 # Add index.php to the list if you are using PHP index index.html index.htm index.nginx-debian.html index.php; server_name _; # nginx不允许静态文件响应post请求，会出现405 not allowed提示，所以需要添加以下内容# 需要开启8080端口，或者可以修改为目前已经开启的端口（或许） error_page 405 =200 @405; location @405 &#123; proxy_method GET; proxy_pass http://你的地址:8080; &#125; location / &#123; # First attempt to serve request as file, then # as directory, then fall back to displaying a 404. try_files $uri $uri/ =404; &#125; # pass PHP scripts to FastCGI server # location ~ \\.php$ &#123; include snippets/fastcgi-php.conf; # With php-fpm (or other unix sockets): # 这里需要把php7.2修改为安装php时显示的版本 fastcgi_pass unix:/var/run/php/php7.2-fpm.sock; # With php-cgi (or other tcp sockets): # fastcgi_pass 127.0.0.1:9000; &#125; 修改表单所在的html文件接下来打开表单所在的html文件，修改form标签，例如我的： 123456789101112131415161718192021&lt;!--其实粘贴这么多只是想说form标签需要加个action=\"mail.php\"啦（滑稽）--&gt;&lt;form method=\"post\" action=\"mail.php\"&gt; &lt;div class=\"fields\"&gt; &lt;div class=\"field half\"&gt; &lt;label for=\"name\"&gt;Name&lt;/label&gt; &lt;input type=\"text\" name=\"name\" id=\"name\" /&gt; &lt;/div&gt; &lt;div class=\"field half\"&gt; &lt;label for=\"email\"&gt;Email&lt;/label&gt; &lt;input type=\"text\" name=\"email\" id=\"email\" /&gt; &lt;/div&gt; &lt;div class=\"field\"&gt; &lt;label for=\"message\"&gt;Message&lt;/label&gt; &lt;textarea name=\"message\" id=\"message\" rows=\"6\"&gt;&lt;/textarea&gt; &lt;/div&gt; &lt;/div&gt; &lt;ul class=\"actions\"&gt; &lt;li&gt;&lt;input type=\"submit\" value=\"Send Message\" class=\"primary\" /&gt;&lt;/li&gt; &lt;li&gt;&lt;input type=\"reset\" value=\"Clear\" /&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/form&gt; 配置mail.php文件form提交将会调用mail.php文件，接下来就需要配置它了。我浏览了许多网站，发现网上大体只有两个模板，即这个和这个。但亲身体验后发现都！不！能！用！第一个是单纯的配置文件问题，我把各项修改好后还是不能用。（或许是因为我多删了点东西？）第二个则使用了php的mail()函数，不过很不幸的是，正如这篇最后解决我问题的文章中写的一样： PHP环境下，是提供了发送邮件的函数mail()的，不过该函数要求服务器支持sendmail或者必须设置一台不需要中继的邮件发送服务器，但现在要找到一台不需要身份验证的邮件发送中继几乎不可能，所以使用mail函数往往无法成功发送电子邮件。 mail()函数确实无法成功发送邮件。这篇文章同样给出了一个解决办法，就是使用PHPMailer。 将其git clone到服务器并解压，mail.php只需按照README.md中所给的Example进行微量修改，我的大概为： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;?php// Import PHPMailer classes into the global namespace// These must be at the top of your script, not inside a functionuse PHPMailer\\PHPMailer\\PHPMailer;use PHPMailer\\PHPMailer\\SMTP;use PHPMailer\\PHPMailer\\Exception;// 修改这三个文件的路径为服务器路径require './PHPMailer/src/Exception.php';require './PHPMailer/src/PHPMailer.php';require './PHPMailer/src/SMTP.php';// 这里将内容对应改成form标签中各项的名字$email=$_POST['email'];$name=$_POST['name'];$message=$_POST['message'];// Instantiation and passing `true` enables exceptions$mail = new PHPMailer(true);// 这里我使用的是qq邮箱，其它邮箱同理try &#123; //Server settings $mail-&gt;SMTPDebug = SMTP::DEBUG_SERVER; // Enable verbose debug output $mail-&gt;isSMTP(); // Send using SMTP $mail-&gt;Host = 'smtp.qq.com'; // Set the SMTP server to send through $mail-&gt;SMTPAuth = true; // Enable SMTP authentication $mail-&gt;Username = '邮箱的用户名'; // SMTP username $mail-&gt;Password = '邮箱的密码'; // SMTP password// $mail-&gt;SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS; // Enable TLS encryption; `PHPMailer::ENCRYPTION_SMTPS` also accepted $mail-&gt;SMTPSecure = 'ssl'; $mail-&gt;Port = 465; // TCP port to connect to //Recipients $mail-&gt;setFrom('邮箱的用户名', '随便填个昵称'); $mail-&gt;addAddress('发送到的邮箱', '随便填个昵称'); // Add a recipient // 后边的那些我不用，就注释掉了// $mail-&gt;addAddress('ellen@example.com'); // Name is optional// $mail-&gt;addReplyTo('info@example.com', 'Information');// $mail-&gt;addCC('cc@example.com');// $mail-&gt;addBCC('bcc@example.com'); // Attachments// $mail-&gt;addAttachment('/var/tmp/file.tar.gz'); // Add attachments// $mail-&gt;addAttachment('/tmp/image.jpg', 'new.jpg'); // Optional name // Content $mail-&gt;isHTML(true); // Set email format to HTML $mail-&gt;Subject = \"An E-mail from $email\"; $mail-&gt;Body = \"This e-mail is written by $name : $message\"; // 我在测试时，AltBody中的内容并不会在邮件中显示出来，目前暂时不清楚有什么用 $mail-&gt;AltBody = \"\"; $mail-&gt;send(); echo 'Message has been sent';&#125; catch (Exception $e) &#123; echo \"Message could not be sent. Mailer Error: &#123;$mail-&gt;ErrorInfo&#125;\";&#125; 提交不跳转方法经过以上配置之后，你的表单应该可以正常发送邮件了，唯一的不足是在点击提交之后会跳转出现一堆提示信息，影响观感，这篇文章中给出了一种可行方法，即为form标签加入target属性并添加iframe标签。以我的表单为例，需要将form标签修改为： 1&lt;form method=\"post\" action=\"mail.php\" target=\"id_iframe\"&gt; 并在其后添加： 1&lt;iframe id=\"id_iframe\" name=\"id_iframe\" style=\"\"&gt;&lt;/iframe&gt; 这样修改虽然有效，但会在点击提交之后出现一个简陋的框体，其中显示的内容就是之前跳转后的提示信息。这没有达到我们的目的，于是想到将iframe标签隐藏，也就是将其的高度和宽度设置为0： 1&lt;iframe id=\"id_iframe\" name=\"id_iframe\" style=\"\" width=\"0\" height=\"0\"&gt;&lt;/iframe&gt; 可这样又会出现一个问题，点击按钮之后邮件到底有没有发送成功是未知的，因为所有的提示信息都被隐藏掉了，那该怎么办呢？我想到的是，将原来php文件中的两个用于输出提示信息的echo修改成echo &quot;&lt;script&gt;alert(&#39;内容&#39;)&lt;/script&gt;&quot;，也就是： 1234567echo 'Message has been sent';// 替换为echo \"&lt;script&gt;alert('Message has been sent')&lt;/script&gt;\";echo \"Message could not be sent. Mailer Error: &#123;$mail-&gt;ErrorInfo&#125;\";// 替换为echo \"&lt;script&gt;alert('Message could not be sent.')&lt;/script&gt;\"; 这样的话就可以实现网页弹窗提示邮件发送结果而不跳转了。 效果预览 结语总体来说，以上实现方式虽然可以正常使用，但是还有很大改进空间，比如提交不跳转的实现方式。不过毕竟自己没有系统学习过web方面的知识，也只能得过且过了。等什么时候能闲下来再考虑改进吧（笑）。也欢迎大家在评论里给我提建议吖！（话说这篇文章真的有人看吗？！）","categories":[{"name":"网站建设","slug":"网站建设","permalink":"https://allwens.work/categories/%E7%BD%91%E7%AB%99%E5%BB%BA%E8%AE%BE/"}],"tags":[{"name":"php","slug":"php","permalink":"https://allwens.work/tags/php/"},{"name":"网站","slug":"网站","permalink":"https://allwens.work/tags/%E7%BD%91%E7%AB%99/"}]},{"title":"manjaro搜狗输入法libfcitx-qt.so错误","slug":"fixSogouInput","date":"2019-08-21T00:59:19.000Z","updated":"2020-01-26T15:43:52.210Z","comments":true,"path":"fixSogouInput/","link":"","permalink":"https://allwens.work/fixSogouInput/","excerpt":"在一次fcitx的更新后，我的搜狗输入法出现了异常，通知栏提示 1搜狗输入法异常！请删除.config&#x2F;SogouPY并重启","text":"在一次fcitx的更新后，我的搜狗输入法出现了异常，通知栏提示 1搜狗输入法异常！请删除.config&#x2F;SogouPY并重启 按照提示删除了~/.config/SogouPY目录，重启电脑过后仍然提示此问题。于是在终端中输入sogou-qimpanel获取错误信息，输出为 1error while loading shared libraries: libfcitx-qt.so.0: cannot open shared object file: No such file or directory 查阅资料后得知是因为缺少fcitx-qt4，于是试图安装： 1yay -S fcitx-qt4 却在获取源代码时提示 1Warning: Transient problem: HTTP error Will retry in 3 seconds. 进一步排查得知，AUR上fcitx-qt4的source链接已经挂掉无法使用。于是在google上搜索fcitx-qt4-4.2.9.6-1-x86_64.pkg.tar.xz，找到可用的下载链接。 下载后将其移动到~/.cache/yay/fcitx-qt4目录下，重新使用yay安装fcitx-qt4，在询问Packages to cleanBuild?时输入N即可正常安装，安装完成后问题解决。","categories":[{"name":"故障修复","slug":"故障修复","permalink":"https://allwens.work/categories/%E6%95%85%E9%9A%9C%E4%BF%AE%E5%A4%8D/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://allwens.work/tags/linux/"},{"name":"manjaro","slug":"manjaro","permalink":"https://allwens.work/tags/manjaro/"}]},{"title":"manjaro常用的垃圾清理命令","slug":"cleanUpFiles","date":"2019-08-12T07:17:25.000Z","updated":"2020-01-26T15:43:33.410Z","comments":true,"path":"cleanUpFiles/","link":"","permalink":"https://allwens.work/cleanUpFiles/","excerpt":"清除系统中无用的包 1sudo pacman -R $(pacman -Qdtq) 清除已下载的安装包","text":"清除系统中无用的包 1sudo pacman -R $(pacman -Qdtq) 清除已下载的安装包 1sudo pacman -Scc 日志垃圾 查看日志文件 123du -t 100M &#x2F;varorjournalctl --disk-usage 删除指定大小日志文件 1sudo journalctl --vacuum-size&#x3D;50M","categories":[{"name":"系统优化","slug":"系统优化","permalink":"https://allwens.work/categories/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://allwens.work/tags/linux/"},{"name":"manjaro","slug":"manjaro","permalink":"https://allwens.work/tags/manjaro/"}]},{"title":"禁用笔记本自带键盘的方法","slug":"disableKeyboard","date":"2019-07-03T04:13:55.000Z","updated":"2020-01-26T15:41:32.349Z","comments":true,"path":"disableKeyboard/","link":"","permalink":"https://allwens.work/disableKeyboard/","excerpt":"Windows禁用用管理员权限运行cmd，在其中输入： 1sc config i8042prt start= disabled 之后重启即可。","text":"Windows禁用用管理员权限运行cmd，在其中输入： 1sc config i8042prt start= disabled 之后重启即可。 恢复与禁用的步骤相同，把输入的命令改为： 1sc config i8042prt start= demand Linux注意：manjaro需要使用 1sudo pacman -S xorg-xinput 进行安装以使用xinput命令。 打开终端，输入xinput --list获取设备列表： 123456789101112131415161718❯ xinput --list ⎡ Virtual core pointer id=2 [master pointer (3)]⎜ ↳ Virtual core XTEST pointer id=4 [slave pointer (2)]⎜ ↳ USB Optical Mouse Mouse id=14 [slave pointer (2)]⎜ ↳ Synaptics TM3253-001 id=11 [slave pointer (2)]⎣ Virtual core keyboard id=3 [master keyboard (2)] ↳ Virtual core XTEST keyboard id=5 [slave keyboard (3)] ↳ Power Button id=6 [slave keyboard (3)] ↳ Video Bus id=7 [slave keyboard (3)] ↳ Power Button id=8 [slave keyboard (3)] ↳ Sleep Button id=9 [slave keyboard (3)] ↳ Integrated_Webcam_HD: Integrate id=10 [slave keyboard (3)] ↳ Dell WMI hotkeys id=12 [slave keyboard (3)] ↳ AT Translated Set 2 keyboard id=13 [slave keyboard (3)] ↳ DELL Wireless hotkeys id=15 [slave keyboard (3)] ↳ USB Keyboard Consumer Control id=16 [slave keyboard (3)] ↳ USB Keyboard System Control id=17 [slave keyboard (3)] ↳ USB Keyboard id=18 [slave keyboard (3)] 找到AT Translated Set 2 keyboard对应的id（本机为13）。 禁用在终端中输入 1xinput set-prop 13 \"Device Enabled\" 0 恢复在终端中输入 1xinput set-prop 13 \"Device Enabled\" 1","categories":[{"name":"系统优化","slug":"系统优化","permalink":"https://allwens.work/categories/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/"}],"tags":[{"name":"windows","slug":"windows","permalink":"https://allwens.work/tags/windows/"},{"name":"linux","slug":"linux","permalink":"https://allwens.work/tags/linux/"}]}]}